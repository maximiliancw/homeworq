<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>homeworq</title>
    <link rel="icon" href="/static/favicon.ico">
    <link rel="stylesheet" type="text/css" href="/static/styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2.0.6/css/pico.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.colors.min.css">
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">
    <script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" charset="utf8"
        src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>
    {% block head %}{% endblock %}
</head>

<body>
    <progress x-show="$store.data.loading" style="display: none;"></progress>
    <!-- Header -->
    <header class="container">
        <nav>
            <ul id="nav-title">
                <li>
                    <h1>
                        <span style="color: var(--pico-primary)">h</span>omewor<span
                            style="color: var(--pico-primary)">q</span>
                    </h1>
                </li>
            </ul>
            <ul id="nav-links">
                <li><a id="nav-dashboard" href="/">Dashboard</a></li>
                <li><a id="nav-tasks" href="/tasks">Tasks</a></li>
                <li><a id="nav-jobs" href="/jobs">Jobs</a></li>
                <li><a id="nav-logs" href="/logs">Logs</a></li>
            </ul>
            <ul id="nav-menu">
                <li>
                    <details class="dropdown">
                        <summary>☰</summary>
                        <ul dir="rtl">
                            <li class="nav-mobile-items">
                                <a href="/" class="secondary">Dashboard</a>
                            </li>
                            <li class="nav-mobile-items">
                                <a href="/tasks" class="secondary">Tasks</a>
                            </li>
                            <li class="nav-mobile-items">
                                <a href="/jobs" class="secondary">Jobs</a>
                            </li>
                            <li class="nav-mobile-items">
                                <a href="/logs" class="secondary">Logs</a>
                            </li>
                            <!-- Divider for mobile nav -->
                            <li class="nav-mobile-items">
                                <hr>
                            </li>
                            <li>
                                <a href="/api/docs" target="_blank" class="secondary">
                                    API Docs
                                    <svg width="30px" height="30px" viewBox="0 0 24 24"
                                        xmlns="http://www.w3.org/2000/svg" fill="currentColor">
                                        <path
                                            d="M21.3,19a2.42,2.42,0,0,1-2.5.56l-2.35,2.35a.34.34,0,0,1-.49,0l-1-1a.36.36,0,0,1,0-.49l2.36-2.35a2.39,2.39,0,0,1,3.39-2.91L19.12,16.8l1,1,1.62-1.62A2.39,2.39,0,0,1,21.3,19ZM22,8v5.76A4.47,4.47,0,0,0,19.5,13a4.57,4.57,0,0,0-1.29.19V9.29H16.66V14A4.5,4.5,0,0,0,15,17.5a4.07,4.07,0,0,0,0,.5H4a2,2,0,0,1-2-2V8A2,2,0,0,1,4,6H20A2,2,0,0,1,22,8ZM11,15,9.09,9.27H7L5.17,15h1.7l.29-1.07H9L9.29,15Zm4.77-3.89a1.67,1.67,0,0,0-.55-1.35,2.43,2.43,0,0,0-1.62-.47h-2V15h1.54V13.11h.44a2.75,2.75,0,0,0,1-.17,1.82,1.82,0,0,0,.67-.44,1.63,1.63,0,0,0,.36-.64A2.36,2.36,0,0,0,15.75,11.11Zm-7.3.62-.12-.44-.15-.58c0-.21-.08-.37-.11-.5a4.63,4.63,0,0,1-.1.48c0,.19-.08.38-.13.57s-.08.34-.12.47l-.24.93H8.69Zm5.59-1a.63.63,0,0,0-.5-.17h-.4v1.31h.31a.9.9,0,0,0,.37-.07.59.59,0,0,0,.27-.22.75.75,0,0,0,.11-.42A.57.57,0,0,0,14,10.71Z" />
                                        <rect width="24" height="24" fill="none" />
                                    </svg>

                                </a>
                            </li>
                            <li>
                                <a href="https://maximiliancw.github.io/homeworq" target="_blank" class="secondary">
                                    User Guide
                                    <svg width="30px" height="30px" viewBox="0 0 24 24"
                                        xmlns="http://www.w3.org/2000/svg" fill="currentColor">
                                        <path
                                            d="M6 0a3 3 0 100 6 3 3 0 000-6zM4.5 7A4.49 4.49 0 000 11.5v.5c0 1 1 1 1 1h6V8.875c0-.83.587-1.554 1.355-1.79A4.532 4.532 0 007.5 7zM9 9v4h1V9z" />
                                        <path
                                            d="M8.875 8A.863.863 0 008 8.875v6.25c0 .492.383.875.875.875h6.25a.863.863 0 00.875-.875v-6.25A.863.863 0 0015.125 8zM11 9h2v1h-2zm0 2h2v4h-2z" />
                                    </svg>

                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/maximiliancw/homeworq" target="_blank" class="secondary">
                                    Source Code
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                                        aria-hidden="true" width="30" height="30">
                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                            d="M12 2C6.48 2 2 6.48 2 12c0 4.42 2.87 8.166 6.839 9.489.5.092.683-.217.683-.483 0-.238-.008-.866-.013-1.7-2.782.604-3.37-1.343-3.37-1.343-.454-1.155-1.11-1.462-1.11-1.462-.908-.62.07-.607.07-.607 1.003.071 1.531 1.033 1.531 1.033.892 1.529 2.341 1.087 2.91.831.091-.647.35-1.086.637-1.337-2.22-.252-4.555-1.111-4.555-4.946 0-1.092.39-1.986 1.029-2.686-.103-.253-.446-1.268.099-2.645 0 0 .84-.269 2.75 1.026A9.564 9.564 0 0 1 12 5.8a9.56 9.56 0 0 1 2.501.336c1.91-1.295 2.75-1.026 2.75-1.026.546 1.377.202 2.392.1 2.645.64.7 1.029 1.594 1.029 2.686 0 3.845-2.337 4.692-4.565 4.94.359.31.679.924.679 1.861 0 1.344-.012 2.429-.012 2.759 0 .268.181.58.688.482C19.13 20.164 22 16.421 22 12c0-5.52-4.48-10-10-10z" />
                                    </svg>

                                </a>
                            </li>
                        </ul>
                    </details>
                </li>
            </ul>
        </nav>
    </header>
    <!-- ./ Header -->

    <!-- Main -->
    <main class="container">
        <section>
            <header class="grid">
                <h2>{% block title %}{% endblock %}</h2>
                {% block page_menu %}{% endblock %}
            </header>
        </section>
        <section>
            {% block content %}{% endblock %}
        </section>
    </main>
    <!-- ./ Main -->

    <!-- Loader -->
    <div id="loader" class="loader" aria-hidden="true"></div>

    <!-- Notifications -->
    <div x-data class="notification-container" aria-live="polite">
        <template x-for="(notification, id) in $store.data.notifications" :key="id">
            <div x-show="!notification.hidden" :data-notification-id="id" :data-group="notification.group" :class="[
                    'notification', 
                    `notification-${notification.type}`,
                    notification.group ? (
                        notification === $store.data.notifier.getLatestGroupNotification(notification.group) ? 'notification-group-first' : 
                        Object.values($store.data.notifications).filter(t => t.group === notification.group && !t.hidden).indexOf(notification) === 0 ? 'notification-group-last' : ''
                    ) : ''
                 ]" x-transition:enter="slideIn" x-transition:leave="slideOut"
                @click="notification.group && $store.data.notifier.toggleGroup(notification.group)">
                <div class="notification-message" x-text="notification.message"></div>
                <template
                    x-if="notification.group && $store.data.notifier.getGroupCount(notification.group) > 1 && !notification.hidden && notification === $store.data.notifier.getLatestGroupNotification(notification.group)">
                    <span class="notification-badge"
                        x-text="$store.data.notifier.getGroupCount(notification.group)"></span>
                </template>
                <button class="notification-close" @click.stop="$store.data.notifier.removeNotification(id)"
                    aria-label="Close notification">×</button>
            </div>
        </template>
    </div>

    <!-- Modal -->
    <dialog id="modal" class="modal" role="dialog" aria-modal="true">
        <article>
            <header>
                <button class="close" aria-label="Close" onclick="closeModal()"></button>
                <h2 class="modal-title"></h2>
            </header>
            <pre class="modal-body" aria-live="polite"></pre>
        </article>
    </dialog>

    <!-- Scripts -->
    <script type="text/javascript" charset="utf8" src="/static/js/scripts.js"></script>
    <script type="text/javascript" charset="utf8" src="/static/js/notifications.js"></script>
    <script type="text/javascript" charset="utf8" src="/static/js/store.js"></script>
    {% block scripts %}{% endblock %}
</body>

</html>